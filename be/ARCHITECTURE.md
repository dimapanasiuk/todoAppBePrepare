# Архитектура проекта TODO App

## Обзор

Проект построен на основе **MVC-подобной архитектуры** с четким разделением ответственности между компонентами.

## Структура проекта

```
be/src/
├── config/              # Конфигурация
│   └── index.ts        # Настройки приложения (порт, окружение)
├── routes/             # Маршрутизация
│   ├── index.ts       # Главный роутер (объединяет все роуты)
│   └── taskRoutes.ts  # Роуты для задач
├── controllers/        # Контроллеры
│   └── taskController.ts  # Логика обработки запросов для задач
├── models/            # Модели данных
│   └── taskModel.ts   # Работа с задачами (CRUD операции)
├── types/             # TypeScript типы
│   └── Task.ts       # Интерфейсы Task, CreateTaskDto, UpdateTaskDto
├── utils/            # Утилиты
│   └── generateId.ts # Генерация уникальных ID
├── middlewares/      # Middleware
│   └── errorHandler.ts  # Обработка ошибок
└── index.ts          # Точка входа приложения
```

## Слои приложения

### 1. Routes (Маршрутизация)

**Файлы:** `routes/index.ts`, `routes/taskRoutes.ts`

**Назначение:** Определяет API endpoints и связывает их с контроллерами.

**Пример:**
```typescript
router.get('/', taskController.getAllTasks);
router.post('/', taskController.createTask);
```

### 2. Controllers (Контроллеры)

**Файлы:** `controllers/taskController.ts`

**Назначение:** 
- Обрабатывает HTTP запросы
- Валидирует входные данные
- Вызывает методы модели
- Формирует HTTP ответы

**Пример:**
```typescript
createTask(req: Request, res: Response): void {
  const { title, description } = req.body;
  
  if (!title || title.trim() === '') {
    res.status(400).json({ error: 'Title is required' });
    return;
  }
  
  const newTask = taskModel.create({ title, description });
  res.status(201).json(newTask);
}
```

### 3. Models (Модели данных)

**Файлы:** `models/taskModel.ts`

**Назначение:**
- Работа с данными (CRUD операции)
- Хранение данных в памяти
- Логика работы с данными

**Методы:**
- `findAll()` - получить все задачи
- `findById(id)` - получить задачу по ID
- `create(dto)` - создать задачу
- `update(id, dto)` - обновить задачу
- `delete(id)` - удалить задачу

### 4. Types (Типы)

**Файлы:** `types/Task.ts`

**Назначение:** TypeScript интерфейсы для типизации данных.

**Типы:**
- `Task` - полная модель задачи
- `CreateTaskDto` - данные для создания задачи
- `UpdateTaskDto` - данные для обновления задачи

### 5. Config (Конфигурация)

**Файлы:** `config/index.ts`

**Назначение:** Централизованное хранение настроек приложения.

### 6. Utils (Утилиты)

**Файлы:** `utils/generateId.ts`

**Назначение:** Вспомогательные функции, используемые в разных частях приложения.

### 7. Middlewares (Промежуточное ПО)

**Файлы:** `middlewares/errorHandler.ts`

**Назначение:** Обработка ошибок, логирование, валидация и другие сквозные задачи.

## Поток данных (Data Flow)

```
┌─────────┐
│ Client  │
└────┬────┘
     │ HTTP Request
     ▼
┌─────────────┐
│   Routes    │ ← Определяет endpoint и передает в контроллер
└─────┬───────┘
      │
      ▼
┌─────────────┐
│ Controller  │ ← Валидирует данные, вызывает модель
└─────┬───────┘
      │
      ▼
┌─────────────┐
│   Model     │ ← Выполняет операции с данными
└─────┬───────┘
      │
      ▼
┌─────────────┐
│ Controller  │ ← Формирует ответ
└─────┬───────┘
      │ HTTP Response
      ▼
┌─────────┐
│ Client  │
└─────────┘
```

## Преимущества такой архитектуры

1. **Separation of Concerns** - каждый компонент отвечает за свою задачу
2. **Легко тестировать** - можно тестировать каждый слой отдельно
3. **Масштабируемость** - легко добавлять новые функции
4. **Читаемость** - понятная структура для новых разработчиков
5. **Переиспользование кода** - контроллеры и модели можно использовать в разных местах

## Расширение функционала

### Добавление нового ресурса (например, Users)

1. Создать типы в `types/User.ts`
2. Создать модель в `models/userModel.ts`
3. Создать контроллер в `controllers/userController.ts`
4. Создать роуты в `routes/userRoutes.ts`
5. Подключить роуты в `routes/index.ts`

### Добавление middleware

1. Создать файл в `middlewares/`
2. Импортировать и использовать в `index.ts` или в конкретных роутах

### Подключение базы данных

1. Добавить зависимость (например, `mongoose` или `pg`)
2. Создать папку `database/` с конфигурацией подключения
3. Обновить модели для работы с БД вместо in-memory storage

